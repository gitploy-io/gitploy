envs:
  # local environment is used to test features.
  - name: local
    auto_merge: false

  - name: dev
    task: ${GITPLOY_DEPLOY_TASK:=rollback}:kubernetes
    # Disable "auto_merge" to avoid merge conflict
    # when it deploys the tag behind the head.
    auto_merge: false
    # Check test and publish is succeed.
    required_contexts:
      - "go-test"
      - "react-test"
      - "publish-image"

  - name: production
    task: ${GITPLOY_DEPLOY_TASK:=rollback}:kubernetes
    auto_merge: false
    required_contexts:
      - "go-test"
      - "react-test"
      - "publish-image"
    production_environment: true
    review:
      enabled: true
      reviewers: 
        - hanjunlee
        - noah-qa

  - name: docs
    auto_merge: false
    description: Publish the documentation of Gitploy.
